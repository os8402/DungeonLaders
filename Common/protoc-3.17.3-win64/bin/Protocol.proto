syntax = "proto3";

package Protocol;
import "google/protobuf/timestamp.proto";
option csharp_namespace = "Google.Protobuf.Protocol";

enum MsgId {
  S_ENTER_GAME = 0;
  S_LEAVE_GAME = 1;
  S_SPAWN = 2;
  S_DESPAWN = 3; 
  C_MOVE = 4; 
  S_MOVE = 5;
  C_SKILL = 6;
  S_SKILL = 7; 
  S_CHANGE_HP = 8;
  S_DIE = 9;
}
 enum ControllerState
 {
   IDLE = 0;
   MOVING = 1;
   SKILL = 2;
   DEAD = 3; 
 }

 enum GameObjectType
 {
	NONE = 0;
	PLAYER = 1;
	MONSTER = 2;
	PROJECTILE = 3;

 }

 enum DirState
 {
	UP = 0;
	DOWN = 1;
	LEFT = 2;
	RIGHT = 3;
	UP_LEFT = 4;
	DOWN_LEFT = 5;
	DOWN_RIGHT = 6;
	UP_RIGHT = 7;
 }

  enum Weapons
 {
   EMPTY = 0;
   SWORD = 1;
   BOW = 2;
   STAFF = 3;
   SPEAR = 4;
 }

 enum SkillType
 {
	SKILL_NONE = 0;
	SKILL_NORMAL = 1;
	SKILL_PROJECTILE = 2; 

 }


message S_EnterGame {
  ObjectInfo player =1;
}

message S_LeaveGame{

}

message S_Spawn{
	repeated ObjectInfo objects = 1; 
}

message S_Despawn{
	repeated int32 objectIds = 1; 
}

message C_Move{
	PositionInfo posInfo = 1;	
}

message S_Move{
	int32 objectId = 1;
	PositionInfo posInfo = 2;
}

message C_Skill{
	AttackPos attackPos = 1;
	TargetInfo targetInfo = 2;
}
message S_Skill{
	int32 objectId = 1; 
	repeated AttackPos attackList= 2;
	AttackPos attackDir = 3; 
	TargetInfo targetInfo = 4;

}
message S_ChangeHp {
	int32 objectId = 1; 
	int32 hp = 2;
	int32 attackerId = 3; 

}
message S_Die {
	int32 objectId = 1; 
	int32 attackerId = 2;

}

message ObjectInfo{
	
	int32 objectId = 1;
	string name = 2; 
	PositionInfo posInfo = 3;
	int32 teamId = 4; 
	WeaponInfo weaponInfo = 5; 
	StatInfo statInfo = 6; 

}

message PositionInfo{

	ControllerState state = 1;
	int32 posX = 2; 
	int32 posY = 3;
	DirState dir = 4; 

}

message WeaponInfo{

	int32 weaponId = 1;
}

message TargetInfo{

	float targetX = 1;
	float targetY = 2;
	DirState dir = 3;
}

message AttackPos{

	int32 attkPosX = 1;
	int32 attkPosY = 2;
	
}

message StatInfo {

	int32 level = 1;
	int32 hp = 2;
	int32 maxHp = 3;
	int32 attack = 4;
	float speed = 5;
	int32 totalExp = 6; 
}


